"use strict";(self["webpackChunkcasestudy"]=self["webpackChunkcasestudy"]||[]).push([[18],{5572:(t,e,a)=>{a.d(e,{C:()=>r,_:()=>l});const s="/api/",l=async t=>{let e,a=o();try{let l=await fetch(`${s}${t}`,{method:"GET",headers:a});e=await l.json()}catch(l){console.log(l),e={error:`Error has occured: ${l.message}`}}return e},r=async(t,e)=>{let a,l=o();try{let r=await fetch(`${s}${t}`,{method:"POST",headers:l,body:JSON.stringify(e)});a=await r.json()}catch(r){a=r}return a},o=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},7081:(t,e,a)=>{a.d(e,{p:()=>l,x:()=>s});const s=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD"}),l=t=>{let e;e=void 0===t?new Date:new Date(Date.parse(t));let a=e.getDate(),s=e.getMonth()+1,l=e.getFullYear(),r=e.getHours(),o=e.getMinutes();return o<10&&(o="0"+o),l+"-"+s+"-"+a+" "+r+":"+o}},5018:(t,e,a)=>{a.r(e),a.d(e,{default:()=>N});var s=a(9835),l=a(6970);const r={class:"text-center"},o=["src"],c=(0,s._)("div",{class:"text-h5 q-mt-xs"},"Basket Contents",-1),n=["src"],u={class:"text-h6 text-positive"},m={key:0,style:{width:"90vw","margin-left":"5vw","margin-top":"1vh"}},d=(0,s.Uk)(" Name "),i=(0,s.Uk)(" Qty "),w=(0,s.Uk)(" MSRP "),p=(0,s.Uk)(" Extended "),g=(0,s.Uk)("Sub:"),f=(0,s.Uk)(" Tax(13%): "),k=(0,s.Uk)("Total:");function b(t,e,a,b,h,x){const y=(0,s.up)("q-avatar"),_=(0,s.up)("q-item-section"),W=(0,s.up)("q-item"),q=(0,s.up)("q-list"),v=(0,s.up)("q-card"),S=(0,s.up)("q-btn"),C=(0,s.up)("q-page"),U=(0,s.up)("q-page-container"),z=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",r,[(0,s.Wm)(y,{class:"q-mb-md",size:"80px",rounded:""},{default:(0,s.w5)((()=>[(0,s._)("img",{src:"/img/skyr.jpg"},null,8,o)])),_:1}),c,(0,s.Wm)(y,{class:"q-mt-md",size:"xl",square:""},{default:(0,s.w5)((()=>[(0,s._)("img",{src:"/img/basket.png"},null,8,n)])),_:1}),(0,s._)("div",u,(0,l.zw)(b.state.status),1)]),b.state.basket.length>0?((0,s.wg)(),(0,s.iD)("div",m,[(0,s.Wm)(z,{view:"lHh Lpr lFf",container:"",style:{height:"60vh"},class:"shadow-2 rounded-borders"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"q-ma-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"col-3 text-bold text-left"},{default:(0,s.w5)((()=>[d])),_:1}),(0,s.Wm)(_,{class:"col-3 text-bold text-left"},{default:(0,s.w5)((()=>[i])),_:1}),(0,s.Wm)(_,{class:"col-3 text-bold text-left"},{default:(0,s.w5)((()=>[w])),_:1}),(0,s.Wm)(_,{class:"col-3 text-bold text-left"},{default:(0,s.w5)((()=>[p])),_:1})])),_:1}),(0,s.Wm)(q,{separator:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.state.basket,(t=>((0,s.wg)(),(0,s.j4)(W,{clickable:"",key:t.id},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"text-right col-3"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.item.productName),1)])),_:2},1024),(0,s.Wm)(_,{class:"text-right col-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.qty),1)])),_:2},1024),(0,s.Wm)(_,{class:"text-right col-3.5"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(b.formatCurrency(t.item.msrp)),1)])),_:2},1024),(0,s.Wm)(_,{class:"text-right col-2.5 q-pr-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(b.formatCurrency(t.item.msrp*t.qty)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"col-8 text-right text-bold"},{default:(0,s.w5)((()=>[g])),_:1}),(0,s.Wm)(_,{class:"text-right col-4 q-pr-md"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(b.formatCurrency(b.state.total)),1)])),_:1})])),_:1}),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"col-8 text-right text-bold"},{default:(0,s.w5)((()=>[f])),_:1}),(0,s.Wm)(_,{class:"text-right col-4 q-pr-md"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(b.formatCurrency(.13*b.state.total)),1)])),_:1})])),_:1}),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"col-8 text-right text-bold text-primary"},{default:(0,s.w5)((()=>[k])),_:1}),(0,s.Wm)(_,{class:"text-right col-4 q-pr-md text-bold text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(b.formatCurrency(1.13*b.state.total)),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(W,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"col-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"q-mr-sm",color:"negative",label:"Save Basket",disable:b.state.basket.length<1,onClick:e[0]||(e[0]=t=>b.saveBasket())},null,8,["disable"])])),_:1}),(0,s.Wm)(_,{class:"col-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"q-mr-sm",color:"secondary",label:"Clear Basket",onClick:e[1]||(e[1]=t=>b.clearBasket())})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])):(0,s.kq)("",!0)],64)}var h=a(7081),x=a(499),y=a(5572);const _={setup(){let t=(0,x.qj)({status:"",msrp:0,total:0,basket:[]});(0,s.bv)((()=>{sessionStorage.getItem("basket")?(t.basket=JSON.parse(sessionStorage.getItem("basket")),t.basket.forEach((e=>{t.msrp+=e.item.msrp,t.total+=e.item.msrp*e.qty}))):t.basket=[]}));const e=()=>{sessionStorage.removeItem("basket"),t.basket=[],t.status="basket cleared",t.total=0},a=async()=>{let a=JSON.parse(sessionStorage.getItem("customer")),s=JSON.parse(sessionStorage.getItem("basket"));try{t.status="sending basket info to server";let l={email:a.email,selections:s},r=await(0,y.C)("order",l);r.indexOf("not")>0||e(),t.status=r}catch(l){console.log(l),t.status=`Error add basket: ${l}`}};return{state:t,clearBasket:e,formatCurrency:h.x,saveBasket:a}}};var W=a(1639),q=a(1357),v=a(249),S=a(2133),C=a(9885),U=a(4458),z=a(490),Q=a(1233),Z=a(3246),B=a(4455),D=a(9984),I=a.n(D);const j=(0,W.Z)(_,[["render",b]]),N=j;I()(_,"components",{QAvatar:q.Z,QLayout:v.Z,QPageContainer:S.Z,QPage:C.Z,QCard:U.Z,QItem:z.Z,QItemSection:Q.Z,QList:Z.Z,QBtn:B.Z})}}]);